(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Shoppgin"],{"021f":function(t,e,n){},2532:function(t,e,n){"use strict";var i=n("23e7"),s=n("5a34"),c=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(c(this)).indexOf(s(t),arguments.length>1?arguments[1]:void 0)}})},"2acb":function(t,e,n){"use strict";n("b0f7")},"3c93":function(t,e,n){"use strict";n("021f")},"44e7":function(t,e,n){var i=n("861d"),s=n("c6b6"),c=n("b622"),r=c("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==s(t))}},"458a":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-container van-hairline--bottom"},[n("div",{staticClass:"card-img"},[n("img",{ref:"img",attrs:{src:t.images[0]}})]),n("div",{staticClass:"card-content"},[n("div",{staticClass:"title overflow-hidden"},[t._v(t._s(t.title))]),n("div",{staticClass:"desc overflow-hidden"},[t._v(t._s(t.desc))]),n("div",{staticClass:"prices"},[t._v("￥"+t._s(t.price))]),t.price_off?n("span",[t._v("限时折扣价"+t._s(t.price_off))]):t._e(),n("div",{staticClass:"tags"},t._l(t.tags,(function(e){return n("div",{key:e},[t._v(t._s(e))])})),0),n("div",{staticClass:"counter"},[t.num?n("div",[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png",alt:""},on:{touchend:function(e){return t.counter(t.id,-1)}}})]):t._e(),t.num?n("div",{staticClass:"num"},[t._v(" "+t._s(t.num)+" ")]):t._e(),n("div",[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png",alt:""},on:{touchend:function(e){return t.counter(t.id,1)}}})])])])])},s=[],c=n("8bbf"),r=n.n(c),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.exist?n("div",{staticClass:"item",style:{width:t.width+"px",height:t.height+"px",opacity:t.opacity,transform:"translate("+t.moveX+"px,"+t.moveY+"px) scale("+t.sx+","+t.sy+")"}},[n("img",{attrs:{src:t.src}})]):t._e()},o=[],u=(n("9ad6"),n("2877")),l={},d=Object(u["a"])(l,a,o,!1,null,"15a4b923",null),f=d.exports,h=r.a.extend(f),p=function(t){var e=t.startX,n=t.startY,i=t.endX,s=t.endY,c=t.src,r=t.width,a=t.height,o=new h({el:document.createElement("div"),data:function(){return{moveX:e,moveY:n,src:c,sx:1,sy:1,opacity:1,exist:!0,width:r,height:a}}});document.body.appendChild(o.$el),setTimeout((function(){o.moveX=i,o.moveY=s,o.sx=.1,o.sy=.1,o.opacity=0,setTimeout((function(){o.exist=!1}),1e3)}),0)},g={props:["images","tags","title","desc","price","id","num","price_off","onify"],methods:{counter:function(t,e){if(this.$store.commit("storageChange",{id:t,value:e}),-1!=e&&!this.onify){var n=this.$refs.img.getBoundingClientRect(),i=n.top,s=n.left,c=this.$refs.img,r=c.offsetWidth,a=c.offsetHeight,o=document.getElementById("shop-card"),u=o.getBoundingClientRect(),l=u.top,d=u.left,f=o.offsetWidth,h=o.offsetHeight,g=d+f/2,v=l+h/2;p({startY:i,startX:s,width:r,height:a,src:this.$refs.img.src,endX:g,endY:v})}}}},v=g,m=(n("2acb"),Object(u["a"])(v,i,s,!1,null,"7ceab99c",null));e["a"]=m.exports},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"9ad6":function(t,e,n){"use strict";n("a9e8")},a15b:function(t,e,n){"use strict";var i=n("23e7"),s=n("44ad"),c=n("fc6a"),r=n("a640"),a=[].join,o=s!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:o||!u},{join:function(t){return a.call(c(this),void 0===t?",":t)}})},a9e8:function(t,e,n){},aa3f:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shopping-container"},[n("div",{staticClass:"top-bar"},[n("van-nav-bar",{attrs:{title:"购物车","right-text":"删除"},on:{"click-right":t.del}})],1),[t.shopList.length>0?n("div",{staticClass:"card-list"},[n("van-checkbox-group",{ref:"checkboxGroup",model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.shopList,(function(e){return n("div",{key:e.id,staticClass:"card-box"},[n("van-checkbox",{staticClass:"check",attrs:{name:e.id}}),n("GoodsCard",t._b({attrs:{num:t.counterMap[e.id],onify:!0}},"GoodsCard",e,!1))],1)})),0)],1):n("van-empty",{attrs:{description:"快去首页逛逛吧"}})],n("van-submit-bar",{attrs:{price:t.allMonery,"button-text":"结算"+t.totalNum},on:{submit:t.onSubmit}},[n("van-checkbox",{on:{click:t.toggleAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],2)},s=[],c=n("1da1"),r=n("5530"),a=(n("96cf"),n("4de4"),n("caad"),n("2532"),n("b64b"),n("a15b"),n("159b"),n("458a")),o=n("3089"),u=n("5880"),l={components:{GoodsCard:a["a"]},data:function(){return{shopList:[],result:[],checked:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(u["mapState"])(["counterMap"])),{},{totalNum:function(){var t=this,e=this.shopList.filter((function(e){return t.result.includes(e.id)})),n=e.reduce((function(e,n){return e+t.counterMap[n.id]}),0);return n},allMonery:function(){var t=this,e=this.shopList.filter((function(e){return t.result.includes(e.id)}));return e.reduce((function(e,n){var i=t.counterMap[n.id];return n.price_off?e+Math.round(i*n.price_off*100):e+Math.round(i*n.price*100)}),0)}}),created:function(){this.getAllData()},watch:{result:function(){this.result.length===this.shopList.length?this.checked=!0:this.checked=!1},counterMap:function(){this.getAllData()}},methods:{getAllData:function(){var t=this,e=Object.keys(this.counterMap);this.$api.getGoodsByIds(e.join()).then((function(e){t.shopList=e.list}))},del:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.result.length){e.next=14;break}return e.prev=1,e.next=4,o["Dialog"].confirm({message:"是否确定删除商品"});case 4:t.result.forEach((function(e){t.$store.commit("storageChange",{id:e,value:-1/0}),t.shopList=t.shopList.filter((function(t){return!t.id===e}))})),t.getAllData(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0),Object(o["Toast"])("用户点击了取消");case 12:e.next=15;break;case 14:Object(o["Toast"])("请选择要删除的商品");case 15:case"end":return e.stop()}}),e,null,[[1,8]])})))()},onSubmit:function(){},toggleAll:function(){this.checked?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll(!1)}}},d=l,f=(n("3c93"),n("2877")),h=Object(f["a"])(d,i,s,!1,null,"7d76b834",null);e["default"]=h.exports},ab13:function(t,e,n){var i=n("b622"),s=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[s]=!1,"/./"[t](e)}catch(i){}}return!1}},b0f7:function(t,e,n){},caad:function(t,e,n){"use strict";var i=n("23e7"),s=n("4d64").includes,c=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),c("includes")}}]);
//# sourceMappingURL=Shoppgin.8820e443.js.map